CREATE TABLE IF NOT EXISTS rating (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR
);

CREATE TABLE IF NOT EXISTS film (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR NOT NULL,
  description VARCHAR,
  releaseDate TIMESTAMP NOT NULL,
  duration INTEGER NOT NULL,
  rating INTEGER NOT NULL REFERENCES rating(id)
);

CREATE TABLE IF NOT EXISTS genre (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR
);

CREATE TABLE IF NOT EXISTS film_genre (
  film_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  genre_id INTEGER NOT NULL REFERENCES genre(id)
);

CREATE TABLE IF NOT EXISTS filmorate_user (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  email VARCHAR,
  login VARCHAR,
  name VARCHAR,
  birthday TIMESTAMP
);

CREATE TABLE IF NOT EXISTS film_like (
  film_id INTEGER NOT NULL REFERENCES film(id),
  user_id INTEGER NOT NULL REFERENCES filmorate_user(id)
);

CREATE TABLE IF NOT EXISTS friendship (
  user_id INTEGER NOT NULL REFERENCES filmorate_user(id),
  friend_id INTEGER NOT NULL REFERENCES filmorate_user(id),
  approved BOOLEAN
);